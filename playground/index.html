<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Playground</title>
    <link rel="stylesheet" href="main.css">
</head>

<body>
    <div class="container">
        <div class="left-side">
            <div class="app-grid">
                <button class="grid-item" id="name-tile" style="flex-direction: column;">
                    <span style="font-size: 24px;">Güçhan Alkan</span>
                    <span style="font-size: 16px;">Programmer</span>
                </button>
                <button class="grid-item" url="https://lab.guchanalkan.com/">LAB: Programming blog<br>opens in new
                    tab</button>
                <button class="grid-item" data-app="conway.wasm">CONWAY</button>
                <button class="grid-item" data-app="fuzzy.wasm">FUZZY LOGIC</button>
                <button class="grid-item" data-app="boids.wasm">BOIDS</button>
                <button class="grid-item" data-app="astar.wasm">A-STAR</button>
                <button class="grid-item" data-app="procanim.wasm">PROC-ANIM</button>
                <button class="grid-item" data-app="sandbox.wasm">SANDBOX</button>
                <button class="grid-item" data-app="world.wasm">WORLD</button>
                <button class="grid-item">#8</button>
                <button class="grid-item">#9</button>
                <button class="grid-item">#10</button>
                <button class="grid-item">#11</button>
                <button class="grid-item">#12</button>
                <button class="grid-item">#13</button>
                <button class="grid-item">#14</button>
            </div>
        </div>
        <div class="right-side">
            <div class="content">
                <canvas id="glcanvas"></canvas>
                <script src="https://not-fl3.github.io/miniquad-samples/gl.js"></script>
                <script>
                    const apps = [
                        'conway.wasm',
                        'fuzzy.wasm',
                        'boids.wasm',
                        'astar.wasm',
                        'procanim.wasm',
                        'sandbox.wasm',
                        'world.wasm',
                    ];

                    // Load app and update URL
                    function loadApp(appName) {
                        load(appName);
                        // Update URL hash without reloading page
                        window.location.hash = appName.replace('.wasm', '');
                    }

                    // Check URL hash on page load
                    function loadFromHash() {
                        const hash = window.location.hash.slice(1); // Remove '#'
                        if (hash) {
                            const appName = hash + '.wasm';
                            if (apps.includes(appName)) {
                                load(appName);
                                return;
                            }
                        }
                        // No valid hash, pick random app
                        const randomApp = apps[Math.floor(Math.random() * apps.length)];
                        loadApp(randomApp);
                    }

                    // Handle hash changes (back/forward buttons)
                    window.addEventListener('hashchange', () => {
                        const hash = window.location.hash.slice(1);
                        if (hash) {
                            const appName = hash + '.wasm';
                            if (apps.includes(appName)) {
                                load(appName);
                            }
                        }
                    });

                    // Button handlers
                    document.querySelectorAll('.grid-item[data-app], .grid-item[url]').forEach(button => {
                        button.addEventListener('click', () => {
                            const appName = button.getAttribute('data-app');
                            if (appName) {
                                loadApp(appName);
                            }
                            const url = button.getAttribute('url');
                            if (url) {
                                window.open(url);
                            }
                        });
                    });

                    // Initialize
                    loadFromHash();
                </script>
            </div>
        </div>
    </div>

    <audio id="beat" src="beat.mp3" loop></audio>
    <script>
        const tile = document.getElementById("name-tile");
        const beat = document.getElementById("beat");
        tile.addEventListener("mouseenter", () => {
            beat.currentTime = 0;
            beat.play();
        });
        tile.addEventListener("mouseleave", () => {
            beat.pause();
        });
    </script>
</body>

</html>